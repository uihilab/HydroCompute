<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>webgpu/utils/gslCode/matrixUtils_gpu.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="engine.html">engine</a><ul class='methods'><li data-type='method'><a href="engine.html#.availableScripts">availableScripts</a></li><li data-type='method'><a href="engine.html#.concurrentRun">concurrentRun</a></li><li data-type='method'><a href="engine.html#.initialize">initialize</a></li><li data-type='method'><a href="engine.html#.parallelRun">parallelRun</a></li><li data-type='method'><a href="engine.html#.run">run</a></li><li data-type='method'><a href="engine.html#.setEngine">setEngine</a></li><li data-type='method'><a href="engine.html#.stepRun">stepRun</a></li><li data-type='method'><a href="engine.html#.stop">stop</a></li><li data-type='method'><a href="engine.html#.taskRunner">taskRunner</a></li></ul></li><li><a href="EventBus.html">EventBus</a><ul class='methods'><li data-type='method'><a href="EventBus.html#clear">clear</a></li><li data-type='method'><a href="EventBus.html#emit">emit</a></li><li data-type='method'><a href="EventBus.html#off">off</a></li><li data-type='method'><a href="EventBus.html#on">on</a></li></ul></li><li><a href="hydroCompute.html">hydroCompute</a><ul class='methods'><li data-type='method'><a href="hydroCompute.html#availableEngines">availableEngines</a></li><li data-type='method'><a href="hydroCompute.html#availableResults">availableResults</a></li><li data-type='method'><a href="hydroCompute.html#availableSplits">availableSplits</a></li><li data-type='method'><a href="hydroCompute.html#currentEngine">currentEngine</a></li><li data-type='method'><a href="hydroCompute.html#data">data</a></li><li data-type='method'><a href="hydroCompute.html#engineScripts">engineScripts</a></li><li data-type='method'><a href="hydroCompute.html#getResTimes">getResTimes</a></li><li data-type='method'><a href="hydroCompute.html#getTotalTime">getTotalTime</a></li><li data-type='method'><a href="hydroCompute.html#isEngineSet">isEngineSet</a></li><li data-type='method'><a href="hydroCompute.html#makeId">makeId</a></li><li data-type='method'><a href="hydroCompute.html#results">results</a></li><li data-type='method'><a href="hydroCompute.html#run">run</a></li><li data-type='method'><a href="hydroCompute.html#setEngine">setEngine</a></li><li data-type='method'><a href="hydroCompute.html#setResults">setResults</a></li><li data-type='method'><a href="hydroCompute.html#setTotalTime">setTotalTime</a></li><li data-type='method'><a href="hydroCompute.html#stop">stop</a></li></ul></li><li><a href="threadManager.html">threadManager</a><ul class='methods'><li data-type='method'><a href="threadManager.html#.createWorkerThread">createWorkerThread</a></li><li data-type='method'><a href="threadManager.html#.initializeWorkerThread">initializeWorkerThread</a></li><li data-type='method'><a href="threadManager.html#.killAllWorkers">killAllWorkers</a></li><li data-type='method'><a href="threadManager.html#.resetWorkers">resetWorkers</a></li><li data-type='method'><a href="threadManager.html#.stop">stop</a></li></ul><ul class='members'><li data-type='method'><a href="threadManager.html#.execTimes">execTimes</a></li></ul></li><li><a href="WebRTC.html">WebRTC</a><ul class='methods'><li data-type='method'><a href="WebRTC.html#.createAnswer">createAnswer</a></li><li data-type='method'><a href="WebRTC.html#.createOfferDescription">createOfferDescription</a></li><li data-type='method'><a href="WebRTC.html#.initialize">initialize</a></li><li data-type='method'><a href="WebRTC.html#.onAvailableChannel">onAvailableChannel</a></li><li data-type='method'><a href="WebRTC.html#.oncloseHost">oncloseHost</a></li><li data-type='method'><a href="WebRTC.html#.oncloseReceiver">oncloseReceiver</a></li><li data-type='method'><a href="WebRTC.html#.openConnection">openConnection</a></li><li data-type='method'><a href="WebRTC.html#.restartDataChannel">restartDataChannel</a></li><li data-type='method'><a href="WebRTC.html#.run">run</a></li><li data-type='method'><a href="WebRTC.html#.sendData">sendData</a></li><li data-type='method'><a href="WebRTC.html#.setConnection">setConnection</a></li><li data-type='method'><a href="WebRTC.html#.setDataChannel">setDataChannel</a></li><li data-type='method'><a href="WebRTC.html#.setOfferDescription">setOfferDescription</a></li><li data-type='method'><a href="WebRTC.html#.submitArray">submitArray</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-kernels.html">kernels</a></li><li><a href="Worker.module_GPUWorker.html">GPUWorker</a></li><li><a href="Workers.module_JSWorker.html">JSWorker</a></li><li><a href="Workers.module_PythonWorker.html">PythonWorker</a></li><li><a href="Workers.module_WASMWorker.html">WASMWorker</a><ul class='methods'><li data-type='method'><a href="Workers.module_WASMWorker.html#~getModuleFromDB">getModuleFromDB</a></li><li data-type='method'><a href="Workers.module_WASMWorker.html#~handleC">handleC</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="dbUtils.html">dbUtils</a></li><li><a href="ErrorTypes%250AUsed%2520throughout%2520the%2520libary%2520to%2520assert%2520the%2520types%2520of%2520errors%2520found.html">ErrorTypes
Used throughout the libary to assert the types of errors found</a></li><li><a href="globalUtils.html">globalUtils</a><ul class='methods'><li data-type='method'><a href="globalUtils.html#.arrayChanger">arrayChanger</a></li><li data-type='method'><a href="globalUtils.html#.concatArrays">concatArrays</a></li><li data-type='method'><a href="globalUtils.html#.DAG">DAG</a></li><li data-type='method'><a href="globalUtils.html#.dataCloner">dataCloner</a></li><li data-type='method'><a href="globalUtils.html#.flattenFloat32Array">flattenFloat32Array</a></li><li data-type='method'><a href="globalUtils.html#.getPerformanceMeasures">getPerformanceMeasures</a></li><li data-type='method'><a href="globalUtils.html#.importJSONdata">importJSONdata</a></li><li data-type='method'><a href="globalUtils.html#.IndexedDAG">IndexedDAG</a></li></ul></li><li><a href="gpuScripts.html">gpuScripts</a><ul class='members'><li data-type='method'><a href="gpuScripts.html#.gpuScripts">gpuScripts</a></li><li data-type='method'><a href="gpuScripts.html#.matrixUtils_gpu">matrixUtils_gpu</a></li></ul></li><li><a href="gpuUtils.html">gpuUtils</a><ul class='members'><li data-type='method'><a href="gpuUtils.html#.bindGroup">bindGroup</a></li><li data-type='method'><a href="gpuUtils.html#.bindLayout">bindLayout</a></li><li data-type='method'><a href="gpuUtils.html#.bufferCreator">bufferCreator</a></li><li data-type='method'><a href="gpuUtils.html#.bufferDestroyer">bufferDestroyer</a></li><li data-type='method'><a href="gpuUtils.html#.computingPipelines">computingPipelines</a></li><li data-type='method'><a href="gpuUtils.html#.deviceConnect">deviceConnect</a></li><li data-type='method'><a href="gpuUtils.html#.dispatchers">dispatchers</a></li><li data-type='method'><a href="gpuUtils.html#.exports.matrixChanger">exports.matrixChanger</a></li><li data-type='method'><a href="gpuUtils.html#.groupEntry">groupEntry</a></li><li data-type='method'><a href="gpuUtils.html#.layoutEntry">layoutEntry</a></li><li data-type='method'><a href="gpuUtils.html#.matrixSize">matrixSize</a></li><li data-type='method'><a href="gpuUtils.html#.resultHolder">resultHolder</a></li><li data-type='method'><a href="gpuUtils.html#.shaderModule">shaderModule</a></li></ul></li><li><a href="jsScripts.html">jsScripts</a><ul class='members'><li data-type='method'><a href="jsScripts.html#.matrixUtils_js">matrixUtils_js</a></li><li data-type='method'><a href="jsScripts.html#.timeSeries_js">timeSeries_js</a></li></ul></li><li><a href="splits.html">splits</a><ul class='methods'><li data-type='method'><a href="splits.html#.divideIntoSubmatrices">divideIntoSubmatrices</a></li><li data-type='method'><a href="splits.html#.join">join</a></li><li data-type='method'><a href="splits.html#.main">main</a></li><li data-type='method'><a href="splits.html#.split1DArray">split1DArray</a></li><li data-type='method'><a href="splits.html#.splitMatrix">splitMatrix</a></li><li data-type='method'><a href="splits.html#.splitmDArray">splitmDArray</a></li></ul></li><li><a href="WASMUtils.html">WASMUtils</a><ul class='methods'><li data-type='method'><a href="WASMUtils.html#._location">_location</a></li><li data-type='method'><a href="WASMUtils.html#.ASModule">ASModule</a></li><li data-type='method'><a href="WASMUtils.html#.avScripts">avScripts</a></li><li data-type='method'><a href="WASMUtils.html#.CModule">CModule</a></li><li data-type='method'><a href="WASMUtils.html#.filterFunctionKeys">filterFunctionKeys</a></li><li data-type='method'><a href="WASMUtils.html#.getAllModules">getAllModules</a></li><li data-type='method'><a href="WASMUtils.html#.loadModule">loadModule</a></li></ul><ul class='members'><li data-type='method'><a href="WASMUtils.html#.AScriptUtils">AScriptUtils</a></li><li data-type='method'><a href="WASMUtils.html#.ASUtils">ASUtils</a></li><li data-type='method'><a href="WASMUtils.html#.availableScripts">availableScripts</a></li><li data-type='method'><a href="WASMUtils.html#.CUtils">CUtils</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#bindJsToR">bindJsToR</a></li><li><a href="global.html#DB_CONFIG">DB_CONFIG</a></li><li><a href="global.html#getDatabaseConfig">getDatabaseConfig</a></li><li><a href="global.html#getDatabaseName">getDatabaseName</a></li><li><a href="global.html#getDatabaseVersion">getDatabaseVersion</a></li><li><a href="global.html#getDataFromIndexedDB">getDataFromIndexedDB</a></li><li><a href="global.html#getPyodide">getPyodide</a></li><li><a href="global.html#getStoreConfig">getStoreConfig</a></li><li><a href="global.html#getWebR">getWebR</a></li><li><a href="global.html#gzipToBase64">gzipToBase64</a></li><li><a href="global.html#isGzipped">isGzipped</a></li><li><a href="global.html#jsToPython">jsToPython</a></li><li><a href="global.html#loadRPackages">loadRPackages</a></li><li><a href="global.html#openDatabase">openDatabase</a></li><li><a href="global.html#pakoLib">pakoLib</a></li><li><a href="global.html#parseXMLSimple">parseXMLSimple</a></li><li><a href="global.html#parseXMLToJSON">parseXMLToJSON</a></li><li><a href="global.html#processDataForXML">processDataForXML</a></li><li><a href="global.html#pythonToJs">pythonToJs</a></li><li><a href="global.html#reassembleChunksFromStore">reassembleChunksFromStore</a></li><li><a href="global.html#resolveDependency">resolveDependency</a></li><li><a href="global.html#storeExistsInSchema">storeExistsInSchema</a></li><li><a href="global.html#storeResultInIndexedDB">storeResultInIndexedDB</a></li><li><a href="global.html#toColumnar">toColumnar</a></li><li><a href="global.html#verifyDatabaseAccess">verifyDatabaseAccess</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">webgpu/utils/gslCode/matrixUtils_gpu.js</h1>
    
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @description Utility functions for matrix operations using GPU shaders.
 * @member matrixUtils_gpu
 * @memberof gpuScripts
*/
export const matrixUtils = {
  /** 
   * Performs matrix multiplication using a GPU shader.
   * @returns {string} - GLSL code for matrix multiplication shader.
   * 
  */
  matrixMultiply_gpu: () => {
    return `
        struct Matrix {
          size: vec2&lt;f32>,
          numbers: array&lt;f32>,
        };
  
        @group(0) @binding(0) var&lt;storage, read> mat1: Matrix;
        @group(0) @binding(1) var&lt;storage, read> mat2: Matrix;
        @group(0) @binding(2) var&lt;storage, read_write> resultMatrix: Matrix;
        
        @compute @workgroup_size(8)
        fn main(@builtin(global_invocation_id) global_id : vec3&lt;u32>) {
          //Guarding against out of bounds group sizes
          if (global_id.x >= u32(mat1.size.x) || global_id.y >= u32(mat2.size.y)){
            return;
          };
  
          resultMatrix.size = vec2(mat1.size.x, mat2.size.y);
  
          let resultCell = vec2(global_id.x, global_id.y);
          var result = 0.0;
          for (var i=0u; i &lt; u32(mat1.size.y); i = i + 1u) {
            let a = i + resultCell.x * u32(mat1.size.y);
            let b = resultCell.y + i * u32(mat2.size.y);
            result = result + mat1.numbers[a] * mat2.numbers[b];
          };
  
          let index = resultCell.y + resultCell.x * u32(mat2.size.y);
          resultMatrix.numbers[index] = result;
        };
      `;
  },

    /** 
   * Performs matrix multiplication using a GPU shader.
   * @returns {string} - GLSL code for matrix Addition shader.
   * 
  */
  matrixAdd_gpu: () => {
    return `
    struct Matrix {
      size: vec2&lt;f32>,
      numbers: array&lt;f32>,
    };
    
    @group(0) @binding(0) var&lt;storage, read> mat1: Matrix;
    @group(0) @binding(1) var&lt;storage, read> mat2: Matrix;
    @group(0) @binding(2) var&lt;storage, read_write> resultMatrix: Matrix;
    
    @compute @workgroup_size(8,8)
    fn main(@builtin(global_invocation_id) global_id : vec3&lt;u32>) {
      // Guarding against out of bounds group sizes
      if (global_id.x >= u32(mat1.size.x) || global_id.y >= u32(mat1.size.y)) {
        return;
      }
    
      resultMatrix.size = mat1.size;
    
      let index = global_id.y + global_id.x * u32(mat1.size.y);
      resultMatrix.numbers[index] = mat1.numbers[index] + mat2.numbers[index];
    };  
    
      `;
  },

  /**
   * @description powers up the elements in a matrix to the given number
   * @param {Number} num - number to exponentiate all elements in the matrix
   * @returns {string} GLSL code for matrix exponentiation shader.
   */
  matrixExpo_gpu: (num = 2.0) => {
    return `
    struct Matrix {
      size: vec2&lt;f32>,
      numbers: array&lt;f32>,
    };
    
    @group(0) @binding(0) var&lt;storage, read> mat1: Matrix;
    @group(0) @binding(1) var&lt;storage, read_write> resultMatrix: Matrix;
    
    @compute @workgroup_size(8,8)
    fn main(@builtin(global_invocation_id) global_id : vec3&lt;u32>) {
      if (global_id.x >= u32(mat1.size.x) || global_id.y >= u32(mat1.size.y)){
        return;
      };
    
      resultMatrix.size = mat1.size;
    
      let index = global_id.x + global_id.y * u32(mat1.size.x);
      let exponent = f32(${num});  // you can change the exponent value to any float number
      resultMatrix.numbers[index] = pow(mat1.numbers[index], exponent);
    }    
    `;
  },

  /**
   * @description decomposition of a matrix to its LeftUpper form
   * @returns {string} string for running LUDecomposition
   */
  LUDecomposition_gpu: () => {
    return `
    struct Matrix {
      size: vec2&lt;f32>,
      numbers: array&lt;f32>,
    };
    
    @group(0) @binding(0) var&lt;storage, read> mat: Matrix;
    @group(0) @binding(1) var&lt;storage, read_write> L: Matrix;
    @group(0) @binding(2) var&lt;storage, read_write> U: Matrix;
    
    @compute @workgroup_size(8,8)
    fn main(@builtin(global_invocation_id) global_id : vec3&lt;u32>) {
        if (global_id.x >= u32(mat.size.x) || global_id.y >= u32(mat.size.y)){
        return;
      };
      
      L.size = mat.size;
      U.size = mat.size;
    
      for(var i = 0; i &lt; mat.size.x; i++) {
        for(var j = 0; j &lt; mat.size.y; j++) {
            if(i &lt;= j) {
              let index = i + j * u32(mat.size.x);
              U.numbers[index] = mat.numbers[index];
              for(var k = 0; k &lt; i; k++) {
                U.numbers[index] = U.numbers[index] - L.numbers[i + k * u32(mat.size.x)] * U.numbers[k + j * u32(mat.size.x)];
              }
            }
            if(i > j) {
              let index = i + j * u32(mat.size.x);
              L.numbers[index] = mat.numbers[index];
              for(var k = 0; k &lt; j; k++) {
                L.numbers[index] = L.numbers[index] - L.numbers[i + k * u32(mat.size.x)] * U.numbers[k + j * u32(mat.size.x)];
              }
              L.numbers[index] = L.numbers[index] / U.numbers[j + j * u32(mat.size.x)];
            }
        }
      }
    }    
    `;
  },
  // main: (name) => {
  //   if ()
  // }
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Mon Jan 12 2026 20:55:23 GMT+0000 (Coordinated Universal Time) using the Toast theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
